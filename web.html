<!DOCTYPE html>
<html lang="en">

<head>
	<title>metasophiea</title>
	<meta charset="utf-8"></meta>
	<style title="Main">html, body{width:100%; height:100%; margin:0px;overflow-x: hidden; overflow-y: hidden;}iframe{width:100%; height:100%; margin:0px; border:0px;}</style>
	<script src="http://metasophiea.com/lib/js/browserWork/ded_bowser.js"></script>
	<script>
		function go(){
			var fileAddress = {'system':'','browser':bowser.name.toLowerCase(),'version':bowser.version};
			fileAddress.version = fileAddress.version.split('.')[0];
			
			if(bowser.hasOwnProperty('likeAndroid')){fileAddress.system = 'mobile';}
			else if(bowser.hasOwnProperty('android')){fileAddress.system = 'mobile';}
			else if(bowser.hasOwnProperty('nexusMobile')){fileAddress.system = 'mobile';}
			else if(bowser.hasOwnProperty('nexusTablet')){fileAddress.system = 'mobile';}
			else if(bowser.hasOwnProperty('chromeos')){fileAddress.system = 'desktop';}
			else if(bowser.hasOwnProperty('silk')){fileAddress.system = 'mobile';}
			else if(bowser.hasOwnProperty('sailfish')){fileAddress.system = 'mobile';}
			else if(bowser.hasOwnProperty('tizen')){fileAddress.system = 'mobile';}
			else if(bowser.hasOwnProperty('webos')){fileAddress.system = 'mobile';}
			else if(bowser.hasOwnProperty('windowsphone')){fileAddress.system = 'mobile';}
			else if(bowser.hasOwnProperty('windows')){fileAddress.system = 'desktop';}
			else if(bowser.hasOwnProperty('mac')){fileAddress.system = 'desktop';}
			else if(bowser.hasOwnProperty('linux')){fileAddress.system = 'desktop';}
			else if(bowser.hasOwnProperty('edgeVersion')){fileAddress.system = 'desktop';}
			else if(bowser.hasOwnProperty('versionIdentifier')){fileAddress.system = 'unknown';}
			else if(bowser.hasOwnProperty('tablet')){fileAddress.system = 'mobile';}
			else if(bowser.hasOwnProperty('mobile')){fileAddress.system = 'mobile';}
			else if(bowser.hasOwnProperty('xbox')){fileAddress.system = 'mobile';}	
			else{fileAddress.system = 'unknown';}

			if(fileAddress.system == 'unknown'){document.getElementById('mainFrame').src = 'http://metasophiea.com/mainSite/display/desktop/compatibility/index.html';}

			goFor(fileAddress.system,fileAddress.browser.split(' ').join(''),fileAddress.version);
		}

		function goFor(system,browser,version){
			function success(system,browser,version){
				var URL = 'http://metasophiea.com/mainSite/display/'+system+'/'+browser+'/'+version+'/index.html';	
				var xhttp= new XMLHttpRequest();
				xhttp.open("GET", URL, true);
				xhttp.send();
				xhttp.onreadystatechange = function(){
					if(xhttp.readyState == 4){
						switch(xhttp.status){
							case 200: document.getElementById('mainFrame').src = URL; break;
							case 404: document.getElementById('mainFrame').src = 'http://metasophiea.com/mainSite/display/'+system+'/'+browser+'/'+0+'/index.html'; break; 
						}
					}			
				}
			}
			function failure(system){
				document.getElementById('mainFrame').src = 'http://metasophiea.com/mainSite/display/'+system+'/compatibility/index.html';
				document.getElementById('report').innerHTML = " You're using " + system+'/'+browser+'/'+version;
			}
			testIfBrowserIsAvailable(system,browser,version,success,failure);
		}


		function testIfBrowserIsAvailable(system,browser,version,success,failure){
			var URL = 'http://metasophiea.com/mainSite/display/'+system+'/'+browser+'/'+0+'/index.html';	
			var xhttp= new XMLHttpRequest();
			xhttp.open("GET", URL, true);
			xhttp.send();
			xhttp.onreadystatechange = function(){
				if(xhttp.readyState == 4){
					switch(xhttp.status){
						case 200: success(system,browser,version); break;
						case 404: failure(system); break; 
					}
				}			
			}
		}
	</script>
</head>

<body onLoad='go();'>

<pre id='report'></pre>
<iframe id='mainFrame' src=""></iframe>

</body>
</html>
