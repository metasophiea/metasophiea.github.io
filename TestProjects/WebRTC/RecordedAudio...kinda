<!DOCTYPE html>
<html lang="en">

<head>
	<title>metasophiea</title>
	<meta charset="utf-8"></meta>
<!-- Info -->
	<!-- favcon: <link rel="icon" href="|url|" type="image/gif" sizes="16x16"> -->
	<!-- Chrome Browser Colour: <meta name="theme-color" content="#db5945"></meta> -->
	<!-- add: xmlns="http://www.w3.org/2000/svg" to SVG element -->
	<!-- add: <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family="> for google fonts-->
	
<!-- Fonts -->
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Arvo">

<!-- Git stuff -->
	<!-- http://rawgit.com/metasophiea/[rest of Github raw address] - for testing (quicker update)(favicon.ico set to rawgit.com's taco-lookin' thing (white remote-control with chunk of smoked salmon on it?)(pedestal suporting Donald Trump's hair?)) -->
	<!-- http://cdn.rawgit.com/metasophiea/[rest of Github raw address] - for full use (favicon.ico open)-->
<!-- Scripts -->
	<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> --> <!-- for JSON -->
	<!-- <script src="http://metasophiea.com/Useful_Items/JavaScript/CSS_Edit.js"></script> --> <!-- for CSS_Edit -->
	<script>
		function Go(){
			console.log("hello");
		}
		var constraints = window.constraints = {audio:true};
		var Recorder;
		var Buffer = [];
		var SuperBuffer;

		navigator.mediaDevices.getUserMedia(constraints)
			.then(
				function(stream){
					console.log(stream);
					console.log(stream.getAudioTracks());

					console.log("recording");
					Recorder = new MediaRecorder(stream, {mimeType: 'audio/webm'}); console.log(Recorder);
					Recorder.ondataavailable = function(event){
						Buffer.push(event.data);
						//console.log(window.URL.createObjectURL(event.data));
					}
					Recorder.onstop = function(event){
						SuperBuffer = new Blob(Buffer,{type: 'audio/webm'});
						document.getElementById("AudioOut").src = window.URL.createObjectURL(SuperBuffer);

						console.log(Buffer);	
						console.log(SuperBuffer);
						console.log(SuperBuffer.type);
						console.log(window.URL.createObjectURL(SuperBuffer));
					}
					Recorder.start(100); console.log(Recorder);
					setTimeout(function(){ Recorder.stop(); },3000);
				}		
			).catch(
				function(error){
					switch(error.name){
						case 'SecurityError': console.log("User didn't allow connection"); break;
						case 'NotFoundError': console.log("User doesn't have an element you requested"); break;
						default: console.log(error);
					}
				}			
			);
	</script>

	<style title="Main">
		html, body{
			width:100%; height:100%; margin:0px;
			/* overflow-x: hidden; overflow-y: hidden; */
		}

	</style>
</head>

<body onLoad="Go()">
	<h1>Hello</h1>
	<audio id="AudioOut" autoplay="true"></audio>
</body>
</html>
