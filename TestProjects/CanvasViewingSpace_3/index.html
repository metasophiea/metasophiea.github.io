<!DOCTYPE html>
<html lang="en">

<head>
	<title>metasophiea</title>
	<meta charset="utf-8"></meta>
<!-- Info -->
	<!-- favcon: <link rel="icon" href="|url|" type="image/gif" sizes="16x16"> -->
	<!-- Chrome Browser Colour: <meta name="theme-color" content="#db5945"></meta> -->
	<!-- add: xmlns="http://www.w3.org/2000/svg" to SVG element -->
	<!-- add: <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family="> for google fonts-->
	
<!-- Fonts -->
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Arvo">

<!-- Git stuff -->
	<!-- http://rawgit.com/metasophiea/[rest of Github raw address] - for testing (quicker update)(favicon.ico set to rawgit.com's taco-lookin' thing (white remote-control with chunk of smoked salmon on it?)(pedestal suporting Donald Trump's hair?)) -->
	<!-- http://cdn.rawgit.com/metasophiea/[rest of Github raw address] - for full use (favicon.ico open)-->
<!-- Scripts -->
	<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> --> <!-- for JSON -->
	<!-- <script src="http://metasophiea.com/Useful_Items/JavaScript/CSS_Edit.js"></script> --> <!-- for CSS_Edit -->

	<script>
	//Viewport control
		var View = { "Position":[250,250], "Angle":0, "Zoom":0 }; var Canvas; 
		var ZoomIndex = {	"-16":0.1, "-15":0.11, "-14":0.13, "-13":0.15, "-12":0.17, "-11":0.2, "-10":0.22, "-9":0.26, 
					"-8":0.3, "-7":0.33, "-6":0.38, "-5":0.43, "-4":0.5, "-3":0.65, "-2":0.75, "-1":0.875, 
					"0":1, 
					"1":1.25, "2":1.25, "3":1.4, "4":1.5, "5":1.68, "6":1.8, "7":2.1, "8":2.5, 
					"9":2.8, "10":3.1, "11":3.5, "12":4.4, "13":4, "14":4.5, "15":5.7, "16":6.5 };

	//Render
		var RefreshPerSecond = 30; var ConstantRenderInterval = setInterval(function(){ Render(); }, 1000/RefreshPerSecond ); 

	//Tool
		var type = "Pan";
		function ClickTool(type, data, object){
			switch(type){
				case "Pan": MousePan(data,object); break;
				case "Spin": MouseSpin(data,object); break;
			}
		}
	</script>

	<script type='text/javascript' src="file:///C:/Users/Brandon/Desktop/CanvasViewingSpace_3/JavaScript/Shape/poly.js"></script>
	<script type='text/javascript' src="file:///C:/Users/Brandon/Desktop/CanvasViewingSpace_3/JavaScript/Render.js"></script>
	<script type='text/javascript' src="file:///C:/Users/Brandon/Desktop/CanvasViewingSpace_3/JavaScript/ViewportControls.js"></script>

	<script>
		function Go(){
			console.log("hello");
			Canvas = document.getElementById('MainCanvas').getContext("2d");
			AdjustCanvasToFill();
			DrawBackground();
			Render();

		}

		function AdjustCanvasToFill(){console.log("adjusting viewport");
			document.getElementById('MainCanvas').height = window.innerHeight;
			document.getElementById('MainCanvas').width = window.innerWidth;
		}

		function CanvasLength(Length){return Length*ZoomIndex[View.Zoom];} // Converts a CanvasSpace Length, to true window Length
		function CanvasToViewport(X,Y){
			//Viewport Angle
				//Get distance from Zero
				var Dis = Math.pow(Math.pow((X),2)+Math.pow((Y),2),0.5);

				//Calculate Angle (catching odd calculations)
				if(X === 0 && Y === 0){var Ang = 0;}
				else if( X === 0 ){ if(Y >= 0){var Ang = 1.5*Math.PI;}else{var Ang = 0.5*Math.PI;} }
				else if( Y === 0 ){ if(X >= 0){var Ang = 0;}else{var Ang = Math.PI;} }
				else if(Y >= 0 && X >= 0){ var Ang = -Math.atan( (Y)/(X) ); }
				else if(Y < 0 && X >= 0){ var Ang = -Math.atan( (Y)/(X) ); }
				else if(Y < 0 && X < 0){ var Ang = -Math.atan( (Y)/(X) ) + Math.PI; }
				else if(Y >= 0 && X < 0){ var Ang = -Math.atan( (Y)/(X) ) + Math.PI; }
				if(isNaN(Ang)){Ang = 0;} if(Ang >= 2*Math.PI){Ang = Ang - 2*Math.PI;}

				//Add Angle
				Ang = Ang + View.Angle;

				//Convert back to Cartesian
				X = (Dis*Math.cos(Ang)); Y = -(Dis*Math.sin(Ang));

			//Viewport Zoom and Pan
			X = (X+View.Position[0])*ZoomIndex[View.Zoom]; Y = (Y+View.Position[1])*ZoomIndex[View.Zoom];

			return [X,Y];
		}


	</script>

	<style title="Main">
		html, body{
			width:100%; height:100%; margin:0px;
			overflow-x: hidden; overflow-y: hidden;
		}

	</style>
</head>

<body onLoad="Go()" onResize="AdjustCanvasToFill()">
  <canvas id="MainCanvas" width="0" height="0" onmousedown="ClickTool(type, event, this)" onwheel="MouseZoom(event, this)"></canvas>
</body>
</html>
